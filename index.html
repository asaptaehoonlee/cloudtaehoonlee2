<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Position Drag and Drop</title>
    <style>
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: transparent;
            overflow: hidden;
            font-family: sans-serif;
        }
        .draggable-icon, .drop-zone {
            position: absolute;
            transition: transform 0.2s, opacity 0.2s;
        }
        .draggable-icon {
            width: 70px; height: 70px;
            cursor: grab;
            border-radius: 10px;
            z-index: 1000;
        }
        .draggable-icon.dragging {
            cursor: grabbing;
            opacity: 0.5;
            transform: scale(1.1);
        }
        .drop-zone {
            width: 120px; height: 120px;
            border-radius: 20px;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        .success-icon {
            position: absolute;
            width: 70px;
            height: 70px;
            border-radius: 10px;
            z-index: 500;
        }
        #zone1 { background-image: url('https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753862820632/cloudelement9.png'); }
        #zone2 { background-image: url('https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753862820632/cloudelement10.png'); }
        #icon1 { top: 16%; right: 83%; }
        #icon2 { top: 16%; right: 70%; }
        #icon3 { top: 16%; right: 57%; }
        #icon4 { top: 16%; right: 44%; }
        #icon5 { top: 16%; right: 31%; }
        #icon6 { top: 16%; right: 18%; }
        #icon7 { top: 16%; right: 5%; }
        #zone1 { bottom: 10%; left: 25%; }
        #zone2 { bottom: 10%; left: 57%; }

        /* ✅ 리셋 버튼 스타일 추가 */
        #reset-button {
            position: absolute;
            bottom: 10%; /* 원하는 위치로 수정 */
            left: 89%; /* 원하는 위치로 수정 */
            width: 70px; /* 버튼 이미지 크기에 맞게 수정 */
            height: 70px; /* 버튼 이미지 크기에 맞게 수정 */
            cursor: pointer;
            z-index: 1001; /* 다른 아이콘보다 위에 오도록 설정 */
        }
    </style>
</head>
<body>

    <img src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753848695939/cloudelement5.png" id="icon1" class="draggable-icon" draggable="true" data-target="zone1" alt="Icon 1"
        data-success-src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753886882027/cloudelement5-1.png" data-original-top="16%" data-original-right="83%">
    <img src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753848695939/cloudelement7.png" id="icon2" class="draggable-icon" draggable="true" data-target="zone1" alt="Icon 2"
        data-success-src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753886882027/cloudelement7-1.png" data-original-top="16%" data-original-right="70%">
    <img src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753848695939/cloudelement1.png" id="icon3" class="draggable-icon" draggable="true" data-target="zone2" alt="Icon 3"
        data-success-src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753886882027/cloudelement1-1.png" data-original-top="16%" data-original-right="57%">
    <img src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753848695939/cloudelement4.png" id="icon4" class="draggable-icon" draggable="true" data-target="zone2" alt="Icon 4"
        data-success-src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753886882027/cloudelement4-1.png" data-original-top="16%" data-original-right="44%">
    <img src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753848695939/cloudelement3.png" id="icon5" class="draggable-icon" draggable="true" data-target="zone2" alt="Icon 5"
        data-success-src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753886882027/cloudelement3-1.png" data-original-top="16%" data-original-right="31%">
    <img src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753848695939/cloudelement2.png" id="icon6" class="draggable-icon" draggable="true" data-target="zone1" alt="Icon 6"
        data-success-src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753886882027/cloudelement2-2.png" data-original-top="16%" data-original-right="18%">
    <img src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753848695939/cloudelement6.png" id="icon7" class="draggable-icon" draggable="true" data-target="zone2" alt="Icon 7"
        data-success-src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753886882027/cloudelement6-1.png" data-original-top="16%" data-original-right="5%">

    <div class="drop-zone" id="zone1"
         data-original-src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753862820632/cloudelement9.png"
         data-hover-src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753878297406/cloudelement9-1.png"></div>
    <div class="drop-zone" id="zone2"
         data-original-src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753862820632/cloudelement10.png"
         data-hover-src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753878297406/cloudelement10-1.png"></div>

    <img src="https://www.thelabyrinth.co.kr/labyrinth/upload/quest/5011/1753946343602/cloudelement11.png" id="reset-button" alt="Reset">

<script>
    const icons = document.querySelectorAll('.draggable-icon');
    const dropZones = document.querySelectorAll('.drop-zone');
    let draggedElement = null;

    document.addEventListener('dragover', function(event) {
        event.preventDefault();
    });

    icons.forEach(icon => {
        icon.addEventListener('dragstart', (e) => {
            draggedElement = e.target;
            setTimeout(() => { e.target.classList.add('dragging'); }, 0);
        });
        icon.addEventListener('dragend', (e) => {
            e.target.classList.remove('dragging');
        });
    });

    dropZones.forEach(zone => {
        zone.addEventListener('dragenter', (e) => {
            const hoverSrc = e.target.dataset.hoverSrc;
            if (hoverSrc) {
                e.target.style.backgroundImage = `url('${hoverSrc}')`;
            }
        });

        zone.addEventListener('dragleave', (e) => {
            const originalSrc = e.target.dataset.originalSrc;
            if (originalSrc) {
                e.target.style.backgroundImage = `url('${originalSrc}')`;
            }
        });

        zone.addEventListener('drop', (e) => {
            e.preventDefault();
            if (!draggedElement) return;

            const targetZoneId = draggedElement.dataset.target;
            const currentZoneId = e.target.id;

            if (targetZoneId === currentZoneId) {
                draggedElement.style.display = 'none';

                const successSrc = draggedElement.dataset.successSrc;
                const originalTop = draggedElement.dataset.originalTop;
                const originalRight = draggedElement.dataset.originalRight;
                if (successSrc && originalTop && originalRight) {
                    const successImage = document.createElement('img');
                    successImage.src = successSrc;
                    successImage.className = 'success-icon';
                    successImage.style.top = originalTop;
                    successImage.style.right = originalRight;
                    document.body.appendChild(successImage);
                }
            }
            
            const originalSrc = e.target.dataset.originalSrc;
            if (originalSrc) {
                e.target.style.backgroundImage = `url('${originalSrc}')`;
            }
            
            draggedElement = null;
        });
    });

    // ✅ 리셋 버튼 기능 스크립트 추가
    const resetButton = document.getElementById('reset-button');
    resetButton.addEventListener('click', () => {
        // 1. 모든 '성공 이미지'(.success-icon)를 찾아서 제거
        const successIcons = document.querySelectorAll('.success-icon');
        successIcons.forEach(icon => {
            icon.remove();
        });

        // 2. 숨겨진 원래 드래그 아이콘(.draggable-icon)들을 다시 보이게 함
        icons.forEach(icon => {
            icon.style.display = 'block';
        });

        // 3. 드롭 존의 배경 이미지를 원래대로 복구 (선택사항, 현재 코드에도 이미 기능이 있지만 명시적으로 추가)
        dropZones.forEach(zone => {
            const originalSrc = zone.dataset.originalSrc;
            if (originalSrc) {
                zone.style.backgroundImage = `url('${originalSrc}')`;
            }
        });
    });
</script>

</body>
</html>
